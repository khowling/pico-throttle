
# Built-in controller = SSD1306
# https://www.winstar.com.tw/products/oled-module/graphic-oled-display/4-pin-oled.html
import ssd1306

import machine
import framebuf
import utime
sda=machine.Pin(0)
scl=machine.Pin(1)
i2c=machine.I2C(0,sda=sda, scl=scl, freq=400000)

oled_width = 128
oled_height = 64
oled = ssd1306.SSD1306_I2C(oled_width, oled_height, i2c)

count = 0
while count < 1:
    count = count +1
    oled.fill(0)
    oled.text('Speed: 1.3 Kph', 15, 25)
    oled.show()
    utime.sleep_ms(100)
    oled.fill(0)
    oled.text('Speed: 1.7 Kph', 15, 25)
    oled.show()
    utime.sleep_ms(100)
    oled.fill(0)
    oled.text('Speed: 2.1 Kph', 15, 25)
    oled.show()
    oled.fill(0)
    oled.text('Speed: 1.3 Kph', 15, 25)
    oled.show()
    utime.sleep_ms(100)
   
 

#oled.invert(1)

oled.fill(0)
utime.sleep_ms(200)

## Generated from 'Fontforge' Exported as ' C FontForge'
# 32, 52
digits = [{
    'x': 32, 'y':52,
    'b': bytearray(b"\x00\x01\x00\x00\x00\x3f\xfc\x00\x00\xff\xff\x00\x01\xff\xff\x80\x07\xff\xff\xe0\x0f\xff\xff\xe0\x0f\xf0\x1f\xf0\x1f\xe0\x07\xf8\x3f\xc0\x03\xf8\x3f\x80\x01\xfc\x3f\x00\x00\xfc\x7f\x00\x00\xfe\x7f\x00\x00\xfe\x7e\x00\x00\x7e\x7e\x00\x00\x7e\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\xfe\x00\x00\x7f\x7e\x00\x00\x7e\x7e\x00\x00\x7e\x7f\x00\x00\xfe\x7f\x00\x00\xfe\x3f\x00\x00\xfc\x3f\x80\x01\xfc\x3f\xc0\x03\xfc\x1f\xe0\x07\xf8\x0f\xf0\x0f\xf0\x0f\xff\xff\xf0\x07\xff\xff\xe0\x01\xff\xff\xc0\x00\xff\xff\x00\x00\x3f\xfc\x00\x00\x01\x00\x00")
    
},{
    'x': 22, 'y': 50,
    'b': bytearray(b"\x00\x1e\x00\x03\xfe\x00\x7f\xfe\x00\xff\xfe\x00\xff\xfe\x00\xff\xfe\x00\xff\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x00\xfe\x00\x7f\xff\xf8\xff\xff\xfc\xff\xff\xfc\xff\xff\xfc\xff\xff\xfc")
},{
    'x': 33, 'y': 51,
    'b': bytearray(b"\x00\x01\x00\x00\x00\x00\x7f\xfc\x00\x00\x01\xff\xff\x00\x00\x07\xff\xff\xc0\x00\x0f\xff\xff\xe0\x00\x1f\xff\xff\xf0\x00\x3f\xf0\x1f\xf8\x00\x3f\xc0\x07\xf8\x00\x7f\x80\x03\xfc\x00\x7f\x00\x01\xfc\x00\xfe\x00\x01\xfc\x00\xfe\x00\x00\xfe\x00\xfc\x00\x00\xfe\x00\xfc\x00\x00\xfe\x00\xfc\x00\x00\xfe\x00\xfc\x00\x00\xfe\x00\x00\x00\x00\xfe\x00\x00\x00\x00\xfc\x00\x00\x00\x01\xfc\x00\x00\x00\x01\xfc\x00\x00\x00\x01\xf8\x00\x00\x00\x03\xf8\x00\x00\x00\x07\xf0\x00\x00\x00\x07\xf0\x00\x00\x00\x0f\xe0\x00\x00\x00\x1f\xe0\x00\x00\x00\x3f\xc0\x00\x00\x00\x7f\x80\x00\x00\x00\xff\x00\x00\x00\x00\xfe\x00\x00\x00\x01\xfc\x00\x00\x00\x03\xfc\x00\x00\x00\x07\xf8\x00\x00\x00\x0f\xf0\x00\x00\x00\x1f\xe0\x00\x00\x00\x3f\xc0\x00\x00\x00\x7f\x80\x00\x00\x00\xff\x00\x00\x00\x01\xfe\x00\x00\x00\x03\xfc\x00\x00\x00\x03\xf8\x00\x1f\x80\x07\xf0\x00\x1f\x80\x0f\xe0\x00\x1f\x80\x1f\xe0\x00\x3f\x80\x3f\xc0\x00\x3f\x80\x7f\x80\x00\x3f\x80\xff\xff\xff\xff\x80\xff\xff\xff\xff\x80\xff\xff\xff\xff\x80\xff\xff\xff\xff\x80\xff\xff\xff\xff\x80")
},{
    'x':31,'y':52,
    'b': bytearray(b"\x00\x01\x00\x00\x00\x7f\xfc\x00\x01\xff\xff\x00\x07\xff\xff\x80\x0f\xff\xff\xc0\x1f\xff\xff\xe0\x3f\xe0\x1f\xf0\x7f\xc0\x07\xf8\x7f\x00\x03\xf8\x7f\x00\x03\xfc\xfe\x00\x01\xfc\xfe\x00\x01\xfc\xfe\x00\x01\xfc\xfc\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x01\xf8\x00\x00\x03\xf8\x00\x00\x03\xf0\x00\x00\x0f\xf0\x00\x00\x7f\xe0\x00\x7f\xff\xc0\x00\x7f\xff\x00\x00\x7f\xff\x00\x00\x7f\xff\xc0\x00\x7f\xff\xe0\x00\x00\x1f\xf0\x00\x00\x07\xf8\x00\x00\x03\xf8\x00\x00\x01\xfc\x00\x00\x01\xfc\x00\x00\x00\xfe\x00\x00\x00\xfe\x00\x00\x00\xfe\x00\x00\x00\xfe\x00\x00\x00\xfe\xfc\x00\x00\xfe\xfc\x00\x00\xfe\xfc\x00\x00\xfe\xfe\x00\x01\xfc\xfe\x00\x01\xfc\x7f\x00\x03\xfc\x7f\x80\x07\xf8\x3f\xe0\x1f\xf0\x1f\xff\xff\xf0\x1f\xff\xff\xe0\x07\xff\xff\x80\x03\xff\xff\x00\x00\x7f\xfc\x00\x00\x03\x00\x00")
},{
    'x':36, 'y':50,
    'b': bytearray(b"\x00\x00\x03\xf8\x00\x00\x00\x07\xf8\x00\x00\x00\x0f\xf8\x00\x00\x00\x0f\xf8\x00\x00\x00\x1f\xf8\x00\x00\x00\x1f\xf8\x00\x00\x00\x3f\xf8\x00\x00\x00\x7f\xf8\x00\x00\x00\x7f\xf8\x00\x00\x00\xff\xf8\x00\x00\x01\xff\xf8\x00\x00\x01\xff\xf8\x00\x00\x03\xfb\xf8\x00\x00\x07\xf3\xf8\x00\x00\x07\xf3\xf8\x00\x00\x0f\xe3\xf8\x00\x00\x0f\xc3\xf8\x00\x00\x1f\xc3\xf8\x00\x00\x3f\x83\xf8\x00\x00\x3f\x03\xf8\x00\x00\x7f\x03\xf8\x00\x00\xfe\x03\xf8\x00\x00\xfc\x03\xf8\x00\x01\xfc\x03\xf8\x00\x03\xf8\x03\xf8\x00\x03\xf0\x03\xf8\x00\x07\xf0\x03\xf8\x00\x07\xe0\x03\xf8\x00\x0f\xc0\x03\xf8\x00\x1f\xc0\x03\xf8\x00\x1f\x80\x03\xf8\x00\x3f\x00\x03\xf8\x00\x7f\x00\x03\xf8\x00\x7f\xff\xff\xff\xf0\xff\xff\xff\xff\xf0\xff\xff\xff\xff\xf0\xff\xff\xff\xff\xf0\xff\xff\xff\xff\xf0\x00\x00\x03\xf8\x00\x00\x00\x03\xf8\x00\x00\x00\x03\xf8\x00\x00\x00\x03\xf8\x00\x00\x00\x03\xf8\x00\x00\x00\x03\xf8\x00\x00\x00\x03\xf8\x00\x00\x00\x3f\xff\xc0\x00\x00\x7f\xff\xe0\x00\x00\x7f\xff\xe0\x00\x00\x7f\xff\xe0\x00\x00\x7f\xff\xe0")
}]


#7,7
chardot = bytearray(b"\xfe\xfe\xfe\xfe\xfe\xfe\xfe")
fbdot = framebuf.FrameBuffer(chardot, 7, 7, framebuf.MONO_HLSB)
fbzero = framebuf.FrameBuffer(digits[0]['b'], digits[0]['x'], digits[0]['y'], framebuf.MONO_HLSB)
oled.blit(fbdot, 38, 52-7)
oled.blit(fbzero, 38+8, 0)

didx = 0
while didx < 5:
    d = digits[didx]
    fb = framebuf.FrameBuffer(d['b'], d['x'], d['y'], framebuf.MONO_HLSB)
    oled.fill(0)
    oled.blit(fb, 36 - d['x'], 0)
    oled.blit(fbdot, 38, 52-7)
    oled.blit(fbzero, 38+8, 0)
    #oled.scroll(1,0)
    oled.show()
    utime.sleep_ms(200)
    didx += 1

# width is the width of the FrameBuffer in pixels
# height is the height of the FrameBuffer in pixels




utime.sleep_ms(5000)
oled.text('Fancy ZZZZZZ', 0, 20)
oled.text('Night night', 0, 40)
oled.show()
utime.sleep_ms(2000)

utime.sleep_ms(2000)
oled.fill(0)
oled.show()

